(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e){e.exports={vertices:[[-1,-1,0],[-1,1,0],[-1,1,0],[1,1,0],[1,1,0],[1,-1,0],[1,-1,0],[-1,-1,0],[-1,-1,0],[1,1,0],[-1,-.5,0],[.5,1,0],[-1,0,0],[0,1,0],[-1,.5,0],[-.5,1,0],[-.5,-1,0],[1,.5,0],[0,-1,0],[1,0,0],[.5,-1,0],[1,-.5,0]],normals:[]}},19:function(e){e.exports={vertices:[[-1,-1,0],[1,-1,0],[0,0,3],[-1,-1,0],[-1,1,0],[0,0,3],[-1,1,0],[1,1,0],[0,0,3],[1,1,0],[1,-1,0],[0,0,3]],normals:[[0,-1,.5],[0,-1,.5],[0,-1,.5],[-1,0,.5],[-1,0,.5],[-1,0,.5],[0,1,.5],[0,1,.5],[0,1,.5],[1,0,.5],[1,0,.5],[1,0,.5]]}},35:function(e,t,n){e.exports=n(56)},39:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a,r,c=n(0),o=n.n(c),i=n(26),s=n.n(i),u=(n(39),n(29)),l=n(9),m=n(4),E=n(1),O=n(17),f=n(3),d=-1,p=1,g=2,b=function(e){var t=Object(O.a)([1,.8,.8]),n=Object(m.c)(0,0,0),a=Object(c.useMemo)(function(){return Array(e.columnsCount+1).fill(0).map(function(t,n){var a=d+g*n/e.columnsCount;return[[a,d,0],[a,p,0]]}).concat(Array(e.rowsCount+1).fill(0).map(function(t,n){var a=d+g*n/e.rowsCount;return[[d,a,0],[p,a,0]]}))},[e.columnsCount,e.rowsCount]),r=Object(c.useMemo)(function(){return{vertices:a.flat(2),indices:a.flat().map(function(e,t){return t}),normals:a.flat().map(function(e){return[0,Math.sign(e[1]),40]}).flat(),uvs:[]}},[a]),i=Object(f.a)(r);return o.a.createElement("group",null,o.a.createElement("material",{program:t},o.a.createElement("geometry",Object.assign({position:n},i,{drawElements:{mode:"LINES",count:r.indices.length}})," ")))},A=function(e){var t=1/e.columnsCount,n=1/e.rowsCount;return o.a.createElement(o.a.Fragment,null,e.render({x:(e.column+.5)*t*2-1,y:-((e.row+.5)*n*2-1),z:.005,scaleX:t,scaleY:n}))},v=n(18),h=n(19),L={vertices:h.vertices.flat(),indices:h.vertices.map(function(e,t){return t}),normals:h.normals.flat(),uvs:[]},j={vertices:v.vertices.flat(),indices:v.vertices.map(function(e,t){return t}),normals:v.normals.flat(),uvs:[]},_=function(){var e=Array(7).fill(0).map(function(e,t){var n=t+1;return[[0,0,0],[.2*Math.cos(2*Math.PI/7*t),.2*Math.sin(2*Math.PI/7*t),0],[.2*Math.cos(2*Math.PI/7*n),.2*Math.sin(2*Math.PI/7*n),0],[.2*Math.cos(2*Math.PI/7*t),.2*Math.sin(2*Math.PI/7*t),0],[.2*Math.cos(2*Math.PI/7*n),.2*Math.sin(2*Math.PI/7*n),0],[.9*Math.cos(2*Math.PI/7*t),.9*Math.sin(2*Math.PI/7*t),0]]}).flat();return{vertices:e.flat(),indices:e.map(function(e,t){return t}),normals:[],uvs:[]}}(),w={vertices:[-1,-1,0,-1,1,0,1,1,0,1,-1,0],indices:[0,1,1,2,2,3,3,0],normals:[],uvs:[]},T=function(){var e=Array(14).fill(0).map(function(e,t){var n=t+1;return[[.7*Math.cos(2*Math.PI/14*t),.7*Math.sin(2*Math.PI/14*t),.5],[.6*Math.cos(2*Math.PI/14*n),.6*Math.sin(2*Math.PI/14*n),0]]}).flat();return{vertices:e.flat(),indices:e.map(function(e,t){return t}),normals:[],uvs:[]}}();!function(e){e.BOULDER="BOULDER",e.GRAVEL="GRAVEL",e.WORMHOLE_ENTRANCE="WORMHOLE_ENTRANCE",e.WORMHOLE_EXIT="WORMHOLE_EXIT"}(a||(a={}));var R=(r={},Object(l.a)(r,a.BOULDER,function(e){var t=Object(m.c)(e.x,e.y,e.z),n=[e.scaleX,e.scaleY,e.scaleY],a=Object(f.a)(L);return o.a.createElement("group",null,o.a.createElement("geometry",Object.assign({position:t,scale:n},a,{drawElements:{mode:"LINE_STRIP",count:L.indices.length}})))}),Object(l.a)(r,a.GRAVEL,function(e){var t=Object(m.c)(e.x,e.y,e.z),n=[e.scaleX,e.scaleY,e.scaleY],a=Object(f.a)(j);return o.a.createElement("group",null,o.a.createElement("geometry",Object.assign({position:t,scale:n},a,{drawElements:{mode:"LINES",count:j.indices.length}})))}),Object(l.a)(r,a.WORMHOLE_ENTRANCE,function(e){var t=Object(m.c)(e.x,e.y,e.z),n=[e.scaleX,e.scaleY,e.scaleY],a=Object(f.a)(w),r=Object(f.a)(_);return o.a.createElement("group",null,o.a.createElement("geometry",Object.assign({position:t,scale:n},a,{drawElements:{mode:"LINES",count:w.indices.length}})),o.a.createElement("geometry",Object.assign({position:t,scale:n},r,{drawElements:{mode:"TRIANGLES",count:_.indices.length}})))}),Object(l.a)(r,a.WORMHOLE_EXIT,function(e){var t=Object(m.c)(e.x,e.y,e.z),n=[e.scaleX,e.scaleY,e.scaleY],a=Object(f.a)(w),r=Object(f.a)(T);return o.a.createElement("group",null,o.a.createElement("geometry",Object.assign({position:t,scale:n},a,{drawElements:{mode:"LINES",count:w.indices.length}})),o.a.createElement("geometry",Object.assign({position:t,scale:n},r,{drawElements:{mode:"LINE_LOOP",count:T.indices.length}})))}),r),D=function(e){var t=Object(O.a)([0,0,0]),n=R[e.type]||null;return o.a.createElement("material",{program:t},o.a.createElement(n,e))},C=function(e){var t=1/e.columnsCount,n=1/e.rowsCount,a=e.path.map(function(e){return{x:(e.column+.5)*t*2-1,y:-((e.row+.5)*n*2-1),z:0}});return o.a.createElement(o.a.Fragment,null,e.render({locations:a}))},N=function(e){var t=Object(m.c)(0,0,0),n=Object(c.useMemo)(function(){return function(e){var t=e.flatMap(function(t,n){var a=[t.x,t.y,0];return 0===n||n===e.length-1?[a]:[a,a]});return{vertices:t.flat(),indices:t.map(function(e,t){return t}),normals:[],uvs:[]}}(e.locations)},[e.locations]),a=Object(f.a)(n);return o.a.createElement("group",null,o.a.createElement("geometry",Object.assign({position:t},a,{drawElements:{mode:"LINES",count:n.indices.length}})))};var M,I,y=function(e){var t=Object(m.c)(e.x,e.y,0),n=[e.scaleX,e.scaleY,e.scaleY],a=Object(f.a)(P);return o.a.createElement("group",null,o.a.createElement("geometry",Object.assign({position:t,scale:n},a,{drawElements:{mode:"LINES",count:P.indices.length}})))},P=function(){var e=1.5,t=1,n=0,a=0,r=[[n-e/2,a-t/2,0],[n+e/2,a-t/2,0],[n,a+t/2,0]],c=[r[0],r[1],r[1],r[2],r[2],r[0],r[0].map(function(e,n){return 1===n?e+t/3:e}),r[1].map(function(e,n){return 1===n?e+t/3:e}),r[1].map(function(e,n){return 1===n?e+t/3:e}),r[2].map(function(e,n){return 1===n?e+t/3:e}),r[2].map(function(e,n){return 1===n?e+t/3:e}),r[0].map(function(e,n){return 1===n?e+t/3:e}),r[0].map(function(e,n){return 1===n?e-t/3:e}),r[1].map(function(e,n){return 1===n?e-t/3:e}),r[1].map(function(e,n){return 1===n?e-t/3:e}),r[2].map(function(e,n){return 1===n?e-t/3:e}),r[2].map(function(e,n){return 1===n?e-t/3:e}),r[0].map(function(e,n){return 1===n?e-t/3:e})];return{vertices:c.flat(),indices:c.map(function(e,t){return t}),normals:[],uvs:[]}}(),G=function(e){var t=Object(m.c)(e.x,e.y,0),n=[e.scaleX,e.scaleY,e.scaleY],a=Object(f.a)(H),r=Object(f.a)(W),c=Object(f.a)(B);return o.a.createElement("group",null,o.a.createElement("geometry",Object.assign({position:t,scale:n},a,{drawElements:{mode:"LINE_LOOP",count:H.indices.length}})),o.a.createElement("geometry",Object.assign({position:t,scale:n},r,{drawElements:{mode:"LINE_LOOP",count:W.indices.length}})),o.a.createElement("geometry",Object.assign({position:t,scale:n},c,{drawElements:{mode:"LINE_LOOP",count:B.indices.length}})))},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14,n=Array(t).fill(0).map(function(n,a){return[e*Math.cos(2*Math.PI/t*a),e*Math.sin(2*Math.PI/t*a),0]});return{vertices:n.flat(),indices:n.map(function(e,t){return t}),normals:[],uvs:[]}},H=S(.9,25),W=S(.6,19),B=S(.3,15),X=function(e){var t=Object(m.a)(0,0,5.15),n=Object(m.b)(22,1,1,1e3),a=Object(E.h)(),r=Object(O.a)([.8,1,1]);return Object(c.useEffect)(function(){a()}),o.a.createElement("camera",{view:t,projection:n},e.obstacles.map(function(t,n){return o.a.createElement(A,Object.assign({key:n},t,e.grid,{render:function(e){return o.a.createElement(D,Object.assign({},e,{type:t.type}))}}))}),o.a.createElement("material",{program:r},o.a.createElement(C,Object.assign({},e.route,e.grid,{render:function(e){return o.a.createElement(N,e)}})),o.a.createElement(A,Object.assign({},e.route.start,e.grid,{render:function(e){return o.a.createElement(y,e)}})),o.a.createElement(A,Object.assign({},e.route.target,e.grid,{render:function(e){return o.a.createElement(G,e)}}))),o.a.createElement(b,e.grid))};n(53);!function(e){e.TOGGLE_GRID_CONTROL_ACTION="TOGGLE_GRID_CONTROL_ACTION",e.UPDATE_PATH="UPDATE_PATH",e.CLEAR_ALL_OBSTACLES="CLEAR_ALL_OBSTACLES"}(M||(M={})),function(e){e.ADD_BOULDER="ADD_BOULDER",e.ADD_GRAVEL="ADD_GRAVEL",e.ADD_WORMHOLE_ENTRANCE="ADD_WORMHOLE_ENTRANCE",e.ADD_WORMHOLE_EXIT="ADD_WORMHOLE_EXIT",e.REMOVE_OBSTACLE="REMOVE_OBSTACLE",e.ADD_START_LOCATION="ADD_START_LOCATION",e.ADD_TARGET_LOCATION="ADD_TARGET_LOCATION"}(I||(I={}));var x,V={obstacles:[],grid:{columnsCount:10,rowsCount:10},route:{start:{row:0,column:0},target:{row:9,column:9},path:[]},gridControlAction:void 0},U=n(16),Y=n(7),k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I.ADD_BOULDER:return Object(Y.a)({},e,{obstacles:[].concat(Object(U.a)(e.obstacles),[{type:a.BOULDER,row:t.row,column:t.column}])});case I.ADD_GRAVEL:return Object(Y.a)({},e,{obstacles:[].concat(Object(U.a)(e.obstacles),[{type:a.GRAVEL,row:t.row,column:t.column}])});case I.ADD_WORMHOLE_ENTRANCE:return Object(Y.a)({},e,{obstacles:[].concat(Object(U.a)(e.obstacles),[{type:a.WORMHOLE_ENTRANCE,row:t.row,column:t.column}])});case I.ADD_WORMHOLE_EXIT:return Object(Y.a)({},e,{obstacles:[].concat(Object(U.a)(e.obstacles),[{type:a.WORMHOLE_EXIT,row:t.row,column:t.column}])});case I.REMOVE_OBSTACLE:return Object(Y.a)({},e,{obstacles:Object(U.a)(e.obstacles.filter(function(e){return e.row!==t.row||e.column!==t.column}))});case I.ADD_START_LOCATION:return Object(Y.a)({},e,{route:Object(Y.a)({},e.route,{start:{row:t.row,column:t.column}})});case I.ADD_TARGET_LOCATION:return Object(Y.a)({},e,{route:Object(Y.a)({},e.route,{target:{row:t.row,column:t.column}})});case M.TOGGLE_GRID_CONTROL_ACTION:return Object(Y.a)({},e,{gridControlAction:t.data});case M.UPDATE_PATH:return Object(Y.a)({},e,{route:Object(Y.a)({},e.route,{path:t.data})});case M.CLEAR_ALL_OBSTACLES:return Object(Y.a)({},e,{obstacles:[]})}},z=function(e,t){return Object(Y.a)({type:e},t)},F=function(e){return{type:M.TOGGLE_GRID_CONTROL_ACTION,data:e}},J=(n(54),function(e){var t=e.rowsCount,n=e.columnsCount,a=e.width,r=e.height,i=e.onClick;return o.a.createElement("div",{className:"grid-control",style:{width:"".concat(a,"px"),height:"".concat(r,"px"),display:"grid",gridAutoRows:r/t,gridAutoColumns:a/n}},Object(c.useMemo)(function(){return Array(t).fill(0).flatMap(function(e,t){return Array(n).fill(0).map(function(e,n){return o.a.createElement("div",{className:"grid-item",onClick:function(){return i({row:t,column:n})},style:{gridRow:t+1,gridColumn:n+1}})})})},[t,n,i]))}),$=(n(55),function(e){return o.a.createElement("div",{className:"switch-control-component"},o.a.createElement("div",{className:"switch-button",onClick:function(){return e.onToggle(!e.isOn)}},o.a.createElement("div",{className:e.isOn?"toggled":null})),o.a.createElement("div",null,e.children))}),q=function(e,t,n,r){var c=Array(e.rowsCount).fill(0).map(function(t){return Array(e.columnsCount).fill(void 0)}),o={position:n,minimalDistance:0,previousNode:void 0,siblings:[]},i={position:r,minimalDistance:1/0,previousNode:void 0,siblings:[]};c[n.row][n.column]=o,c[r.row][r.column]=i;var s=function(e,n){return t.some(function(t){return t.type===n&&t.row===e.row&&t.column===e.column})},u=function(n){var r=[{row:n.position.row+1,column:n.position.column},{row:n.position.row,column:n.position.column+1},{row:n.position.row-1,column:n.position.column},{row:n.position.row,column:n.position.column-1}].filter(function(t){return!((n=t).column<0||n.row<0||n.column>=e.columnsCount||n.row>=e.rowsCount||s(n,a.BOULDER));var n});if(function(e){return s(e.position,a.WORMHOLE_ENTRANCE)}(n)){var o=t.filter(function(e){return e.type===a.WORMHOLE_EXIT});r.push.apply(r,Object(U.a)(o))}r.forEach(function(e){var t=c[e.row][e.column];t||(t={position:e,minimalDistance:1/0,previousNode:void 0,siblings:[]},c[e.row][e.column]=t),n.siblings.push(t)})};return function e(t,n){if(!(t.minimalDistance>n.minimalDistance)&&t!==n){0===t.siblings.length&&u(t);var r=s(t.position,a.GRAVEL)?2:1;t.siblings.forEach(function(a){a.minimalDistance>t.minimalDistance+r&&(a.minimalDistance=t.minimalDistance+r,a.previousNode=t,e(a,n))})}}(o,i),function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.previousNode?(n.unshift(t.position),e(t.previousNode,n)):(n.length>0&&n.unshift(t.position),n)}(i)},K=(x={},Object(l.a)(x,I.ADD_BOULDER,"Boulder"),Object(l.a)(x,I.ADD_GRAVEL,"Gravel"),Object(l.a)(x,I.ADD_START_LOCATION,"Start"),Object(l.a)(x,I.ADD_TARGET_LOCATION,"Target"),Object(l.a)(x,I.ADD_WORMHOLE_ENTRANCE,"Wormhole Ent."),Object(l.a)(x,I.ADD_WORMHOLE_EXIT,"Wormhole Exit"),Object(l.a)(x,I.REMOVE_OBSTACLE,"Clear"),x),Q=function(){var e=Object(c.useReducer)(k,V),t=Object(u.a)(e,2),n=t[0],a=t[1],r=function(){a({type:M.CLEAR_ALL_OBSTACLES})},i=n.grid,s=n.obstacles,l=n.route.start,m=n.route.target;return Object(c.useEffect)(function(){var e=q(i,s,l,m);a(function(e){return{type:M.UPDATE_PATH,data:e}}(e))},[i,s,l,m]),o.a.createElement("div",{className:"world camera"},o.a.createElement("div",{className:"scene"},o.a.createElement("div",{className:"screen"},o.a.createElement("div",{className:"game-pane"},o.a.createElement("div",{className:"not-found "+(0===n.route.path.length?"show":"hide")},"route was not found"),o.a.createElement("div",{className:"canvas"},o.a.createElement(E.a,{width:500,height:500,clearColor:[0,0,0,.1]},o.a.createElement(X,n))),o.a.createElement(J,Object.assign({},n.grid,{width:500,height:500,onClick:function(e){return function(e){n.gridControlAction&&(a(z(I.REMOVE_OBSTACLE,e)),a(z(n.gridControlAction,e)))}(e)}}))),o.a.createElement("div",{className:"controls-pane"},o.a.createElement("div",{className:"with-geometry fill-parent"},"Please fill the field using:",Object.values(I).map(function(e){return o.a.createElement($,{isOn:n.gridControlAction===e,onToggle:function(t){return function(e,t){a(F(t?e:void 0))}(e,t)}},K[e])})),o.a.createElement("div",{className:"with-structure shelf"},o.a.createElement("button",{className:"button",onClick:function(){return r()}},"clear"))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[35,1,2]]]);
//# sourceMappingURL=main.4add2cc3.chunk.js.map